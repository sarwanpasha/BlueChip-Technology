function Slideshow(t) { if (t.length && $(t).hasClass("ss-not-init")) { var e = "ss-" + (new Date).getTime(); t.addClass(e), t.removeClass("ss-not-init"), this.$slideshow = $("." + e), this.currentSlide, this.numSlides, this.$slideAry = [], this.$thmbAry = [], this.$credAry = [], this.$headAry = [], this.$bodyAry = [], this.transTime = 200, this.thmbSlideInterval = 80, this.mseovrTime = 300, this.phoneWidth = 970, this.mdetHidden = !1, this.$rArw = $(t).find(".ss-r-arw"), this.$lArw = $(t).find(".ss-l-arw"), this.$bigArws = $(t).find(".ss-arw-big"), this.$theater = $(t).find(".ss-theater"), this.$rThmbArw = $(t).find(".ss-r-thmb-arw"), this.$lThmbArw = $(t).find(".ss-l-thmb-arw"), this.$showDetail = $(t).find(".ss-show-detail-no"), this.$toggleDetail = $(t).find(".ss-show-detail"), this.$expandSS = $(t).find(".ss-expand"), this.$shrinkSS = $(t).find(".ss-shrink"), this.$slideCase = $(t).find(".ss-img-disp"), this.$thmbCase = $(t).find(".ss-thmb-s"), this.$credDiv = $(t).find(".ss-photo-cred"), this.$count = $(t).find(".ss-count"), this.$slideHead = $(t).find(".ss-head"), this.$slideBody = $(t).find(".ss-text"), this.$detailView = $(t).find(".ss-details"), this.$islandAd = $(t).find(".island-ad"), this.$showingSlide = $(t).find(".ss-slide-showing"), this.$showingCred = $(t).find(".ss-photo-cred-showing"), this.$showingHead = $(t).find(".ss-head-showing"), this.$showingBody = $(t).find(".ss-text"), this.$thmb = $(t).find(".ss-thmb"), this.$screenWidth = $(window).width(), this.init() } } function throttle(t, e, i) { e || (e = 100); var n, a = 0, o = i === !1 ? 0 : e; return function () { function s() { n && (n = clearTimeout(n)), t.apply(c, d), a = r } var r = +new Date, l = r - a - o, d = arguments, c = this; l > e ? s() : n || i === !1 || (n = setTimeout(s, e)) } } function debounce(t, e, i) { var n; return function () { function a() { i || t.apply(o, s), n = null } var o = this, s = arguments; n ? clearTimeout(n) : i && t.apply(o, s), n = setTimeout(a, e || 100) } } function bindVideoPlayerFunctions(t) { function e(e) { "lumia" == t.skin && n(e) } function i(t, e) { var i = $("#tracker" + e); $(".tracker").empty(), $("<img/>", { src: t }).appendTo(i) } function n(e) { var n; switch (e) { case 0: "1" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481551;cache="), "2" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481538;cache="), "3" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481547;cache="), "4" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481549;cache="); break; case 1: "1" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481553;cache="), "2" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481541;cache="), "3" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481559;cache="), "4" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481536;cache="); break; case 2: "1" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481566;cache="), "2" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481532;cache="), "3" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481562;cache="), "4" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481545;cache="); break; case 3: "1" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481555;cache="), "2" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481543;cache="), "3" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481534;cache="), "4" == t.objectId && (n = "https://ad.atdmt.com/i/img;p=11087203481557;cache=") } n += rnum, i(n, t.objectId) } var a = $("#vidplayer" + t.objectId), o = a.data("flowplayer"), s = ".related" + t.objectId, r = ".vidgate" + t.objectId, l = $(".fp-ui"), d = a.find(".fp-volume"), c = t.objectId; if ($(".ad-play").hide(), o) { var h = document.createEvent("Event"); h.initEvent(c, !0, !0); var u = 0, f = setInterval(function () { if (!o.loading) { if (u += 50, u > 5e3) return void clearInterval(f); localStorage.clear(), o.volume(1), o.mute(!1), d.show(), l.show() } }, 50); if ($(this).hasClass("functions-bound") || (o.bind("pause", function (t, e) { if (!e.loading) { setTimeout(function () { e.finished && document.dispatchEvent(h) }, 100); var i = $(".fp-ui"); i.css("background", "url(https://assets.entrepreneur.com/static/1434148634-videoPlayButton.png) center no-repeat") } }), o.bind("resume", function (t, e) { e.finished = !1, e.loading || $(".video-player-related").hide(); var i = $(".fp-ui"); i.css("background", "none") }), o.bind("load", function () { $(".video-player-related").hide(), $(".vidload-container").hide() }), o.bind("unload", function () { }), o.bind("cuepoint", function (t, i, n) { if (i.cuepoints[0] < 1) { { var a = i.video.duration, o = Math.floor(.25 * a), s = Math.floor(.5 * a), r = Math.floor(.75 * a); Math.floor(a) } i.cuepoints = [o, s, r, a] } else n.time == i.cuepoints[0] ? e(0) : n.time == i.cuepoints[1] ? e(1) : n.time == i.cuepoints[2] ? e(2) : n.time == i.cuepoints[3] && e(3) }), $(r).click(function () { $(r).hide(), t.adsAfterClick && (t.showAds = !0), t.sound = !0, entFlowplayer._init(t) }), $(s).click(function () { var t = $(this).data("vidid"), e = "https://assets.entrepreneur.com/video/cdn/" + t + ".mp4"; $(".video-player-related").hide(), o.load(e) })), "lumia" == t.skin) { var p = (".play" + t.objectId, { playVid: function (t) { $(".play" + t).click() }, autoPlayNextVideo: function (t) { var e; e = 4 == t ? 1 : ++t, $(".center").slick("slickGoTo", (e - 1).toString()), $this = this, setTimeout(function () { $this.playVid(e) }, 2e3) } }); document.addEventListener(c, function () { var t = parseInt(c); p.autoPlayNextVideo(t) }, !1) } $(this).addClass("functions-bound") } } function randID() { var t, e = "", i = "abcdefghijklmnopqrstuvwxyz"; for (t = 0; 8 > t; t++) e += i.charAt(Math.floor(26 * Math.random())); return e } function getHVal(t) { return t.substr(t.indexOf(":") + 1) } function refreshAdsInterval() { setInterval(ad.refreshAll, 9e4) } function wait() { null == ad.caninit ? (adI++ > 3 && (ad.caninit = !0), setTimeout(wait, 500)) : ad.caninit && ad.init() } function TagContainerLoader() { var t = this, e = t.w = window; t.d = e.document, t._c = "s_l", e.s_c_il || (e.s_c_il = [], e.s_c_in = 0), t._il = e.s_c_il, t._in = e.s_c_in, t._il[t._in] = t, e.s_c_in++, t.timeout = 5e3, t.to = new Function("var t=s_c_il[" + t._in + "];if(t.mt)t.mt(0)"), t.loadTagContainer = function () { var t, e, i = this, n = i.d.body, a = i.tagContainerServer ? i.tagContainerServer : "www.adobetag.com", o = i.tagContainerServerSecure ? i.tagContainerServerSecure : a, s = i.d.cookie, r = i.tagContainerEnv ? i.tagContainerEnv : s ? s.indexOf("s_tagEnv=dev") >= 0 ? "dev" : s.indexOf("s_tagEnv=stage") >= 0 ? "stage" : "live" : "live", l = (i.w.location.protocol.toLowerCase().indexOf("https") >= 0 ? "https://" + o : "http://" + a) + "/" + (i.tagContainerDC ? i.tagContainerDC + "/" : "") + i.tagContainerNamespace + "/" + r + "/" + i.tagContainerName + ".js"; i.tagContainerURL && (l = i.tagContainerURL), i.timeout && (i.ti = setTimeout(i.to, i.timeout)), i.d.getElementsByTagName ? (t = i.d.getElementsByTagName("HEAD"), t && t[0] && (n = t[0])) : n = 0, n && !i.tagContainerSynchronous ? (e = i.d.createElement("SCRIPT"), e && (e.type = "text/javascript", e.setAttribute("async", "async"), e.src = l, n.firstChild ? n.insertBefore(e, n.firstChild) : n.appendChild(e))) : i.d.write('<script language="JavaScript" type="text/javascript" src="' + l + '"></script>') }, t.fs = function (t, e) { if (t && e) { var i, n, a = t.split(","), o = e.split(","); for (i = 0; i < a.length; i++) for (n = 0; n < o.length; n++) if (a[i] == o[n]) return 1 } return 0 }, t.aa = function (t) { var e, i = 0; if (t) for (i = [], e = 0; e < t.length; e++) i[e] = t[e]; return i }, t.wl = [], t.wq = [], t.createAsynchronousCustomTagHandler = function (t, e) { var i, n, a = this; for (e ? (a.w[t] || (a.w[t] = {}), i = a.wl[t] = a.w[t]) : (e = t, t = 0, i = a.w), "object" != typeof e && (e = [e]), n = 0; n < e.length; n++) i[e[n]] || (i[e[n]] = new Function("var t=s_c_il[" + a._in + "];t.wq[t.wq.length]={" + (t ? 'o:"' + t + '",' : "") + 'f:"' + e[n] + '",a:t.aa(arguments)}')) }, t.as = function (t) { var e, i = []; for (e = 1; e < t.length; e++) i[i.length] = t[e]; return i }, t.s = 0, t.contextData = {}, t.retrieveLightData = {}, e.s_giq || (e.s_giq = []), t._gi = e.s_gi, e.s_gi = new Function("u", "var t=s_c_il[" + t._in + '],w=t.w,l=t._il,i,j,x,s;u=u.toLowerCase();if(l)for(j=0;j<2;j++)for(i=0;i<l.length;i++){s=l[i];x=s._c;if((!x||x=="s_c"||(j>0&&x=="s_l"))&&s.oun&&(s.oun==u||(s.fs&&s.sa&&s.fs(s.oun,u)))){if(s.sa)s.sa(u);return s}}if(!t.oun){t.sa(u);return t}if(t._gi)return t._gi(u);s=new TagContainerLoader();s.tagContainerName="s_tca_"+w.s_giq.length;s.sa(u);w.s_giq[w.s_giq.length]=s;return s'), t.sa = function (t) { var e = this; e.s && e.s.sa(t), e.un = t, e.oun ? e.fs(e.oun, t) || (e.oun += "," + t) : e.oun = t }, t.tq = [], t.track = t.t = function (t) { var e, i = this; if (i.s) return i.s.t(t); t || (t = {}); for (e in i) ("un" != e || i.u != i.un) && (t[e] = i[e]); return i.tq[i.tq.length] = t, i.lnk = i.linkName = i.linkType = "", "" }, t.trackLink = t.tl = function (t, e, i, n) { var a = this; return a.s ? a.s.tl(t, e, v, n) : (a.lnk = t, a.linkType = e, a.linkName = i, a.t(n)) }, t.trackLight = function (t, e, i, n) { var a = this; return a.s ? a.s.trackLight(t, e, i, n) : (a.lightProfileID = t, a.lightStoreForSeconds = e, a.lightIncrementBy = i, a.t(n)) }, t.lmq = [], t.loadModule = function (t, e, i) { var n = this; return n.s ? n.s.loadModule(t, e, i) : (n.lmq[n.lmq.length] = { n: t, u: e, d: i }, 0) }, t.ml = [], t.mmq = [], t.mo = function (t, e) { var i, n = this; if (n.ml[t] = n[t] = {}, e) for (i = 0; i < e.length; i++) n[t][e[i]] = new Function("var t=s_c_il[" + n._in + '];t.mmq[t.mmq.length]={m:"' + t + '",f:"' + e[i] + '",a:t.aa(arguments)}') }, t.mo("Media", ["open", "play", "stop", "close", "track"]), t.mo("Survey", ["launch"]), t.mci = [], t.mn = [], t.mc = function (t, e, i, n) { var a, o = this, s = 0; if ("undefined" != typeof mboxFactoryDefault && null != o.d.getElementById(e)) { if (!mboxFactoryDefault.isEnabled()) return clearInterval(o.mci[n]), void o.mt(!0); "undefined" != typeof mboxFactoryDefault.get(o.mn[0], 0) && (s = mboxFactoryDefault.get(o.mn[0], 0).isShown()), (0 == n || s) && (clearInterval(o.mci[n]), a = mboxFactoryDefault.create(t, i.split("&")), a && a.load()) } }, e.mboxCreate || e.mboxDefine || e.mboxUpdate || (e.mboxVersion = "mini", t.d.getElementById("mboxScriptContainer") || t.d.write('<div id="mboxScriptContainer" style="display:none;visibility:hidden;"></div><style>.mboxDefault{visibility:hidden;}</style>'), t.mt = function (t) { var e, i, n, a = this; if ("undefined" == typeof mboxFactoryDefault || t) { for (e in a.mci) clearInterval(a.mci[e]); n = a.d.getElementsByClassName ? a.d.getElementsByClassName("mboxDefault") : a.d.getElementsByTagName("div"); for (i in n) "mboxDefault" == n[i].className && (n[i].style.visibility = "visible") } }, t.mpi = {}, t.mp = function (t, e) { var i = this; i.mpi[t] = setInterval(function () { "undefined" != typeof mboxFactoryDefault && (e(), clearInterval(i.mpi[t])) }, 13) }, e.mboxCreate = function (e) { var i, n, a, o, s = 0; for (i in t.mn) t.mn[i] == e && s++; t.mn[t.mn.length] = e, n = "mboxMarker-default-" + e + "-" + s, t.d.write('<div id="' + n + '" style="visibility:hidden;display:none">&nbsp;</div>'), a = t.as(arguments).join("&"), o = t.mci.length, t.mci[o] = setInterval(function () { t.mc(e, n, a, o) }, 5) }, e.mboxDefine = function (e, i) { var n = t.as(arguments); t.mp("define_" + i, function () { mboxFactoryDefault.create(i, n, e) }) }, e.mboxUpdate = function (e) { var i, n = t.as(arguments); i = "update_" + e, t.mpi[i] = setInterval(function () { "undefined" != typeof mboxFactoryDefault && "undefined" != typeof mboxFactoryDefault.get(e) && (mboxFactoryDefault.update(e, n), clearInterval(t.mpi[i])) }, 13) }, e.mboxLoadSCPlugin = function (t) { !function () { return "undefined" == typeof mboxFactoryDefault || "undefined" == typeof mboxExternalLoadSCPlugin || "s_l" == t._c && !t.s ? void setTimeout(arguments.callee, 19) : ("s_l" == t._c && (t = t.s), void mboxExternalLoadSCPlugin(t)) }() }) } var mq = function () { function t() { 1 == c.desktop && (c.desktop = !1, c.tabletLandScape = !1, c.tabletPortrait = !0, c.mobile = !0) } function e() { 1 == c.tabletLandScape && ($("#rightside").insertAfter($("h1.section-head")), $("#rightside0").insertBefore($("#latest")), $("#rightside1").insertAfter($("#latest .pl:nth-child(1):not(.pl-native)")), $("#rightside2").insertAfter($("#latest .pl:nth-child(2):not(.pl-native)")), $("#rightside3").insertAfter($("#latest .pl:nth-child(3):not(.pl-native)")), $("#rightside4").insertAfter($("#latest .pl:nth-child(4):not(.pl-native)")), $("#rightside5").insertAfter($("#latest .pl:nth-child(5):not(.pl-native)")), $("#promoted-book").insertAfter($("#latest-articles .pl").length > 3 ? $("#latest-articles .pl:nth-child(3):not(.pl-native)") : $("#latest-articles")), $("#rightside-bank").insertAfter(".topkicker"), c.desktop = !0, c.tabletLandScape = !1, c.tabletPortrait = !0, c.mobile = !0) } function i() { 1 == c.tabletPortrait && ($("#rightside,#rightside0,#rightside1,#rightside2,#rightside3,#rightside4,#rightside5").detach().insertAfter($("#latest")), $("#promoted-book").insertAfter($("#latest-articles")), $("#rightside-bank").insertAfter(".feat"), c.desktop = !0, c.tabletLandScape = !0, c.tabletPortrait = !1, c.mobile = !0) } function n() { 1 == c.mobile && ($("#story-stream").remove(), c.desktop = !0, c.tabletLandScape = !0, c.tabletPortrait = !0, c.mobile = !1) } function a() { d = o.innerWidth || r.clientWidth || l.clientWidth, d >= 970 ? (e(), d >= 1206 && t()) : 768 > d ? n() : i() } var o = window, s = document, r = s.documentElement, l = s.getElementsByTagName("body")[0], d = o.innerWidth || r.clientWidth || l.clientWidth, c = (o.innerHeight || r.clientHeight || l.clientHeight, { desktop: !0, tabletLandScape: !0, tabletPortrait: !0, mobile: !0 }); return $(window).on("resize", a).resize(), { viewportLogic: a } }(); Slideshow.prototype = { constructor: Slideshow, init: function () { this.getSlideElements(), this.addListeners(), this.startSlideShow() }, addListeners: function () { this.$rArw.on("click", $.proxy(this.shiftRight, this)), this.$lArw.on("click", $.proxy(this.shiftLeft, this)), this.$theater.on("swiperight", $.proxy(this.shiftLeft, this)), this.$theater.on("swipeleft", $.proxy(this.shiftRight, this)), this.$rThmbArw.on("click", $.proxy(this.shiftThmbRight, this)), this.$lThmbArw.on("click", $.proxy(this.shiftThmbLeft, this)), this.$theater.on("mouseenter", $.proxy(this.showSlideArws, this)), this.$theater.on("mouseenter", $.proxy(this.showDetailView, this)), this.$theater.on("mouseleave", $.proxy(this.hideSlideArws, this)), this.$thmb.on("click", $.proxy(this.clickThmb, this)), this.$toggleDetail.on("click", $.proxy(this.toggleDetail, this)), this.$expandSS.on("click", $.proxy(this.expandSS, this)), this.$shrinkSS.on("click", $.proxy(this.shrinkSS, this)), $(window).on("resize", $.proxy(this.resized, this)) }, resized: function () { this.$screenWidth = $(window).width(), this.isPhone() ? this.mdetHidden ? this.hideDetailView() : this.showDetailMobileView() : (this.placePhotoCred(), this.$detailView.css("bottom", "0"), this.$theater.trigger("mouseenter")), this.centerImage() }, isPhone: function () { return this.$screenWidth <= this.phoneWidth ? !0 : !1 }, getSlideElements: function () { var t = 0, e = [], i = [], n = [], a = [], o = []; $.each(this.$slideCase.find("img"), function (i, n) { 0 != i && (e[i - 1] = n, t++) }), $.each(this.$thmbCase.find("span"), function (t, e) { i[t] = e }), $.each(this.$credDiv.find("div"), function (t, e) { 0 != t && (n[t - 1] = e) }), $.each(this.$slideHead.find("h3"), function (t, e) { 0 != t && (a[t - 1] = e) }), $.each(this.$slideBody.find("div"), function (t, e) { 0 != t && (o[t - 1] = e) }), this.numSlides = t, this.$slideAry = e, this.$thmbAry = i, this.$credAry = n, this.$headAry = a, this.$bodyAry = o }, startSlideShow: function () { this.currentSlide = 0, this.updateTheater() }, introAnimation: function () { $this = this, this.updateTheater(), setTimeout(function () { $this.$slideCase.animate({ opacity: 1 }, 500) }, 500), this.isPhone() && (this.$credDiv.hide(), this.showDetailMobileView()), setTimeout(function () { $this.hideSlideArws() }, 500) }, expandSS: function () { this.$slideshow.addClass("ss-full"), this.$credDiv.show(), this.placePhotoCred(), this.centerImage() }, shrinkSS: function () { this.isPhone() ? (this.$slideshow.removeClass("ss-full"), this.$credDiv.hide(), this.dePadImage()) : this.hideDetailView() }, toggleDetail: function () { this.isPhone() && (this.mdetHidden = this.mdetHidden ? !1 : !0, this.updateTheater()) }, adjustDetailView: function () { if (this.mdetHidden) { var t = this.$detailView.height(), e = 29, i = e - t; this.$detailView.css("bottom", i) } else this.$detailView.css("bottom", "0px") }, checkHeadForLength: function () { if (this.isPhone() && this.$showingHead.text().length > 20 && this.mdetHidden) { for (var t = "", e = 0; 20 > e; e++) t += this.$showingHead.text()[e]; t += "...", this.$showingHead.html(t) } }, placePhotoCred: function () { if (this.isPhone()) { var t = this.$detailView.height(), e = 29, i = 7, n = e + i, a = t + i; this.mdetHidden ? this.$credDiv.css("bottom", n) : this.$credDiv.css("bottom", a) } else this.$credDiv.css("bottom", "0px"), $(".ss-det-view").css("height", "0px") }, showDetailMobileView: function () { this.isPhone() && (this.$detailView.css("height", "auto"), this.placePhotoCred()) }, showDetailView: function (t) { if (!this.isPhone()) { this.$islandAd.css("display", "block"), this.$detailView.css("height", "514px"), $this = this; var e = setTimeout(function () { var t = window, e = document, i = e.documentElement, n = e.getElementsByTagName("body")[0], a = (t.innerWidth || i.clientWidth || n.clientWidth, t.innerHeight || i.clientHeight || n.clientHeight, -334); $this.$detailView.finish().animate({ right: a }, 300) }, 500); $(t.currentTarget).mouseleave(function () { clearTimeout(e) }) } }, hideDetailView: function () { this.$detailView.finish().animate({ right: 0 }, 300) }, showSlideArws: function () { }, hideSlideArws: function () { }, shiftLeft: function () { var t = this; prevSlide = this.currentSlide, this.currentSlide--, this.currentSlide < 0 && (this.currentSlide = parseInt(this.numSlides - 1)), this.$slideCase.finish().animate({ opacity: 0 }, this.transTime, function () { t.updateTheater() }).animate({ opacity: 1 }, this.transTime) }, shiftRight: function () { var t = this; prevSlide = this.currentSlide, this.currentSlide++, this.currentSlide > this.numSlides - 1 && (this.currentSlide = 0), this.$slideCase.finish().animate({ opacity: 0 }, this.transTime, function () { t.updateTheater() }).animate({ opacity: 1 }, this.transTime) }, shiftThmbRight: function () { var t = this.$thmbCase.scrollLeft(); this.$thmbCase.scrollLeft(t + this.thmbSlideInterval) }, shiftThmbLeft: function () { var t = this.$thmbCase.scrollLeft(); this.$thmbCase.scrollLeft(t - this.thmbSlideInterval) }, clickThmb: function (t) { var e = $(t.currentTarget).attr("thmb-id"); this.currentSlide = parseInt(e), this.updateTheater() }, updateTheater: function () { this.updateSlide(), this.updateCount(), this.updateThmb(), this.updateHead(), this.updateDetails(), this.updateCred() }, updateSlide: function () { $this = this; var t = $(this.$slideAry[this.currentSlide]).attr("src"); this.$showingSlide.attr("src", t).unbind("load").bind("load", function () { $this.centerImage() }) }, centerImage: function () { var t = (parseInt(this.$slideCase.height() - this.$showingSlide.height()) / 2).toString() + "px"; this.$showingSlide.css("padding-top", t) }, dePadImage: function () { this.$showingSlide.css("padding-top", 0) }, updateThmb: function () { var t = $(this.$thmbAry[this.currentSlide]); this.$thmbCase.find(".selected").removeClass("selected"), $(t).addClass("selected"); var e = -1, i = $(t).width(), n = this.$thmbCase.width() - 2 * i; $(t).position().left > n ? e = $(t).position().left - 30 + this.$thmbCase.scrollLeft() : $(t).position().left < 0 ? e = 0 : $(t).position().left < i && this.$thmbCase.scrollLeft() > 0 && (e = this.$thmbCase.scrollLeft() - n - 30), e >= 0 && this.$thmbCase.finish().animate({ scrollLeft: e }, 500) }, updateCount: function () { var t = this.currentSlide + 1 + " of " + this.numSlides; this.$count.html(t) }, updateCred: function () { var t = $(this.$credAry[this.currentSlide]).html(); this.$showingCred.html(void 0 != t ? t : ""), this.isPhone() && this.placePhotoCred() }, updateHead: function () { var t = $(this.$headAry[this.currentSlide]).html(); this.$showingHead.html(t), this.checkHeadForLength() }, updateDetails: function () { var t = $(this.$bodyAry[this.currentSlide]).html(); this.$showingBody.html($("<div/>").html(t).text()), this.isPhone() && this.adjustDetailView() } }, $(window).load(function () { new Slideshow($(".ss-not-init")) }); var $w = $(window), $d = $(document); Date.now || (Date.now = function () { return (new Date).getTime() }), $d.ready(function () { $("body").on("blur", ":text", function () { var t = $(this).val().trim(); $(this).val(t.replace(/\s+/g, " ")) }), $("body").on("submit", 'form[class="form col-md-12"]', function (t) { t.preventDefault(); var e = $(this), i = this.el.value, n = this.email.value; return /(.+)@(.+){2,}\.(.+){2,}/.test(n) ? (e.find("div:eq(2)").hide(), this.email.value = "Processing...", $("input:last", e).val("Sign Up").attr("disabled", "disabled"), $.post("/async/newsletters/subscribe/" + Date.now(), { email: n, "lids[]": i }, function () { $("input", e).remove().end().append("<h2>Thank you!</h2>"), ent.nlCookie(i, !1), e.parent().show().fadeTo(0, 1), s && (s.pageName = "newsletters : subscribe article form - Subscribe to Entrepreneur Newsletters", s.server = window.location.hostname, s.eVar74 = window.top.location.href, s.linkTrackVars = "events,list1,eVar13", s.linkTrackEvents = "event2", s.events = "event2", s.list1 = i, s.eVar13 = 0, s.tl(this, "o", "Newsletter Subscription")) }, "json"), !1) : (e.find("div:eq(2)").show(), !1) }), $("img.lazy").lazyload({ effect: "fadeIn", threshold: 300 }); var t = $('*[data-toggle="popover"]'); $(document).on("click", function (e) { var i = $(".popover"); t.is(e.target) || 0 !== t.has(e.target).length || i.is(e.target) || 0 !== i.has(e.target).length || i.fadeOut(200).removeClass("active").remove(".popover") }), $(t).on("click", function (t) { if (t.preventDefault(), $(this).hasClass("active")) $(this).removeClass("active").next(".popover").remove(); else { if ($(this).addClass("active"), $(this).attr("title")) var e = '<h3 class="popover-title">' + $(this).attr("title") + "</h3>"; else var e = ""; var i = '<div class="arrow"></div><div class="popover-content">' + $(this).data("content") + "</div>", n = $(this).data("placement"); $(this).after('<div class="popover ' + n + '" role="tooltip"><div class="arrow"></div>' + e + i + "</div>"), $(".popover").css({ left: $(this).position().left + $(this).width() + "px", top: $(this).position().top - $(".popover").outerHeight() / 2 + $(this).height() / 2 + "px" }).fadeIn(200) } }), $(".show-more").click(function (t) { t.preventDefault(); var e = $(this).text(); $(this).parent().next(".show-more-box").slideToggle(300), $(this).text(" Show less " == e ? " Show more " : " Show less ") }), $('.dropdown[data-id="ddlatest"]').on("click", function () { var t = "#" + $(".dropdown").data("id"); $(t).slideToggle(200) }), $("#ddlatest a").click(function (t) { t.preventDefault(); var e = $(this).data("id"); $.get("/async/homestream", { key: e }, function (t) { var e = $("<div>"); for (i in t.links) e.append($("<h3>").append($("<a>").attr("href", t.links[i].canonicalUrl).html(t.links[i].headline)).append($("<time>").html(t.links[i].publicationDate))); e.append($('<a class="more">').attr("href", t.more).html("More")), $(".pl-headlines .block").html("").append(e), $("#ddlatest").slideUp(200) }, "json") }); var e = $(window).scrollTop(); $(window).on("scroll", throttle(function () { var t = $(window).scrollTop(); t > 80 ? t > e ? $("#story-stream,#nav-header").animate({ top: "-150px" }, 200) : ($("#nav-header").animate({ top: "0" }, 200), $("#story-stream").animate({ top: "0" }, 200)) : ($("#nav-header").animate({ top: "0" }, 200), $("#story-stream").animate({ top: "-150px" }, 200)), e = t }, 1e3)); { var n = ($("#nav-header"), $("#nav-flyout")), a = ($(".blackout"), $(".nav-more"), $(".nav-search"), $(".nav-more-show")), o = ($(".nav-sub"), $("#nav-header, #story-stream, #page-holder, footer")), r = $("#nav-promo"), l = $("#nav-promo-link"); $("#headertopics,#nav-flyout"), $("#nav-flyout ul li"), $(".li-navlist"), $(".show-modal"), $(".show-modal-content") } ent = { pnav: { visible: !1, show: function () { ent.rnav.hide(), ent.dnav.hide(), r.slideDown(200), l.addClass("active"), this.visible = !0 }, hide: function () { r.slideUp(200), l.removeClass("active"), this.visible = !1 }, toggle: function () { this.visible ? this.hide(1) : this.show() } }, dnav: { th: null, show: function () { ent.rnav.hide(), ent.pnav.hide(), $("body").addClass("of"), n.stop(1, 1).animate({ width: "show" }, 200), o.animate({ left: "251px" }, 200), $("#headertopic").addClass("active") }, hide: function () { ent.navtopic.hide(), n.animate({ width: "hide" }, 200), o.animate({ left: "0" }, 200), $("body").removeClass("of"), $(".nav-sub").hide(), $("#headertopic").removeClass("active") } }, navtopic: { visible: !1, shown: null, sindex: null, list: [], show: function (t) { t.index() != this.sindex && (id = t.data("id"), $self = this, "undefined" == typeof this.list[id] && ($chelement = t.children(".nav-sub"), $chelement.html(""), $.get("/async/links/" + id, function (t) { $self.list[id] = t; for (i in t) $chelement.append('<a href="' + i + '">' + t[i] + "</a>") }, "json")), t.children(".nav-sub").slideDown(200), this.shown = t.children(".nav-sub"), this.sindex = t.index(), this.visible = !0) }, hide: function (t) { t || (this.visible = !1, this.shown = null, this.sindex = null, this.list = []), null == this.shown } }, rnav: { visible: null, shown: null, show: function (t) { ent.dnav.visible && ent.dnav.hide(), ent.pnav.visible && ent.pnav.hide(), a.animate({ width: "show" }, 100), this.shown = t.index(), 1 == this.shown && $("#gsc-i-id1").focus(), this.visible = !0 }, hide: function () { a.animate({ width: "hide" }, 100), this.shown = this.visible = null }, toggle: function (t) { return null != this.shown && this.shown == t.index() ? this.hide(1) : (this.visible && this.hide(), void this.show(t)) } }, nlCookie: function (t, e) { nTypesExp = cookie.get("nltrExpiration"), nTypesExp || cookie["delete"]("newsletterTypes"), nTypes = cookie.get("newsletterTypes"), nTypes ? (types = nTypes.split(","), this.hideNl(types, e), types.push(t), cookie.put("newsletterTypes", types.join(","), 180)) : (cookie.put("newsletterTypes", t, 180), cookie.put("nltrExpiration", "1", 15), this.hideNl([t], e)) }, hideNl: function (t, e) { t.forEach(e === !1 ? function (t) { $(".email-signup.type" + t).fadeTo(0, 0) } : function (t) { $(".email-signup.type" + t).remove() }) } }, $d.ready(function () { var t = [], e = !1; $("#headertopic, #nav-flyout").on("mouseenter", function () { t[0] = setTimeout(ent.dnav.show, 300), clearTimeout(t[1]), e = !0 }).on("mouseleave", function () { t[1] = setTimeout(function () { ent.dnav.hide() }, 200), clearTimeout(t[0]), e = !1 }), $("body").on("swiperight", function (t) { t.swipestart.coords[0] < 50 && ent.dnav.show() }), $("body").on("swipeleft", function () { ent.dnav.hide() }), $("#headertopic").on("click", function (t) { e ? (t.preventDefault(), ent.dnav.hide(), e = !1) : (t.preventDefault(), ent.dnav.show(), e = !0) }), htimer = null, $(".li-navlist").on("mouseenter click", function (t) { return "click" == t.type ? (clearTimeout(htimer), ent.navtopic.show($(this))) : (self = this, void (htimer = setTimeout(function () { ent.navtopic.show($(self)) }, 600))) }).on("mouseleave", function () { clearTimeout(htimer) }), $(".li-navlist i.fa").on("click", function (t) { t.preventDefault(), $(this).siblings(".nav-sub").slideToggle(200) }), $(".nav-more span a").bind("click", function (t) { t.preventDefault(), ent.rnav.toggle(a) }); var i = null; $("#nav-promo-link, #nav-promo").hover(function () { clearTimeout(i), ent.pnav.show() }, function () { i = setTimeout(ent.pnav.hide, 200) }) }), editionBar.init(edition) }), function (t) { var e = t(window); t.fn.visible = function (t) { if (!(this.length < 1)) { var i = this.length > 1 ? this.eq(0) : this, n = i.get(0), a = e.height(); if (bottom = t ? this.offset().top - t < e.scrollTop() + e.height() : !1, bottom = t ? this.offset().top - t < e.scrollTop() + e.height() : !1, "function" == typeof n.getBoundingClientRect) { var o = n.getBoundingClientRect(), s = o.top >= 0 && o.top < a, r = o.bottom > 0 && o.bottom <= a; retval = s || r } else { var l = e.scrollTop(), d = l + a, c = i.offset().top, h = c + i.height(); retval = d >= c && h >= l } return retval || bottom } } }(jQuery), function () {
    var t = [].indexOf || function (t) { for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e; return -1 }, e = [].slice; !function (t, e) { return "function" == typeof define && define.amd ? define("waypoints", ["jquery"], function (i) { return e(i, t) }) : e(t.jQuery, t) }(this, function (i, n) {
        var a, o, s, r, l, d, c, h, u, f, p, m, g, v, $, w; return a = i(n), h = t.call(n, "ontouchstart") >= 0, r = { horizontal: {}, vertical: {} }, l = 1, c = {}, d = "waypoints-context-id", p = "resize.waypoints", m = "scroll.waypoints", g = 1, v = "waypoints-waypoint-ids", $ = "waypoint", w = "waypoints", o = function () { function t(t) { var e = this; this.$element = t, this.element = t[0], this.didResize = !1, this.didScroll = !1, this.id = "context" + l++, this.oldScroll = { x: t.scrollLeft(), y: t.scrollTop() }, this.waypoints = { horizontal: {}, vertical: {} }, this.element[d] = this.id, c[this.id] = this, t.bind(m, function () { var t; return e.didScroll || h ? void 0 : (e.didScroll = !0, t = function () { return e.doScroll(), e.didScroll = !1 }, n.setTimeout(t, i[w].settings.scrollThrottle)) }), t.bind(p, function () { var t; return e.didResize ? void 0 : (e.didResize = !0, t = function () { return i[w]("refresh"), e.didResize = !1 }, n.setTimeout(t, i[w].settings.resizeThrottle)) }) } return t.prototype.doScroll = function () { var t, e = this; return t = { horizontal: { newScroll: this.$element.scrollLeft(), oldScroll: this.oldScroll.x, forward: "right", backward: "left" }, vertical: { newScroll: this.$element.scrollTop(), oldScroll: this.oldScroll.y, forward: "down", backward: "up" } }, !h || t.vertical.oldScroll && t.vertical.newScroll || i[w]("refresh"), i.each(t, function (t, n) { var a, o, s; return s = [], o = n.newScroll > n.oldScroll, a = o ? n.forward : n.backward, i.each(e.waypoints[t], function (t, e) { var i, a; return n.oldScroll < (i = e.offset) && i <= n.newScroll ? s.push(e) : n.newScroll < (a = e.offset) && a <= n.oldScroll ? s.push(e) : void 0 }), s.sort(function (t, e) { return t.offset - e.offset }), o || s.reverse(), i.each(s, function (t, e) { return e.options.continuous || t === s.length - 1 ? e.trigger([a]) : void 0 }) }), this.oldScroll = { x: t.horizontal.newScroll, y: t.vertical.newScroll } }, t.prototype.refresh = function () { var t, e, n, a = this; return n = i.isWindow(this.element), e = this.$element.offset(), this.doScroll(), t = { horizontal: { contextOffset: n ? 0 : e.left, contextScroll: n ? 0 : this.oldScroll.x, contextDimension: this.$element.width(), oldScroll: this.oldScroll.x, forward: "right", backward: "left", offsetProp: "left" }, vertical: { contextOffset: n ? 0 : e.top, contextScroll: n ? 0 : this.oldScroll.y, contextDimension: n ? i[w]("viewportHeight") : this.$element.height(), oldScroll: this.oldScroll.y, forward: "down", backward: "up", offsetProp: "top" } }, i.each(t, function (t, e) { return i.each(a.waypoints[t], function (t, n) { var a, o, s, r, l; return a = n.options.offset, s = n.offset, o = i.isWindow(n.element) ? 0 : n.$element.offset()[e.offsetProp], i.isFunction(a) ? a = a.apply(n.element) : "string" == typeof a && (a = parseFloat(a), n.options.offset.indexOf("%") > -1 && (a = Math.ceil(e.contextDimension * a / 100))), n.offset = o - e.contextOffset + e.contextScroll - a, n.options.onlyOnScroll && null != s || !n.enabled ? void 0 : null !== s && s < (r = e.oldScroll) && r <= n.offset ? n.trigger([e.backward]) : null !== s && s > (l = e.oldScroll) && l >= n.offset ? n.trigger([e.forward]) : null === s && e.oldScroll >= n.offset ? n.trigger([e.forward]) : void 0 }) }) }, t.prototype.checkEmpty = function () { return i.isEmptyObject(this.waypoints.horizontal) && i.isEmptyObject(this.waypoints.vertical) ? (this.$element.unbind([p, m].join(" ")), delete c[this.id]) : void 0 }, t }(), s = function () { function t(t, e, n) { var a, o; n = i.extend({}, i.fn[$].defaults, n), "bottom-in-view" === n.offset && (n.offset = function () { var t; return t = i[w]("viewportHeight"), i.isWindow(e.element) || (t = e.$element.height()), t - i(this).outerHeight() }), this.$element = t, this.element = t[0], this.axis = n.horizontal ? "horizontal" : "vertical", this.callback = n.handler, this.context = e, this.enabled = n.enabled, this.id = "waypoints" + g++, this.offset = null, this.options = n, e.waypoints[this.axis][this.id] = this, r[this.axis][this.id] = this, a = null != (o = this.element[v]) ? o : [], a.push(this.id), this.element[v] = a } return t.prototype.trigger = function (t) { return this.enabled ? (null != this.callback && this.callback.apply(this.element, t), this.options.triggerOnce ? this.destroy() : void 0) : void 0 }, t.prototype.disable = function () { return this.enabled = !1 }, t.prototype.enable = function () { return this.context.refresh(), this.enabled = !0 }, t.prototype.destroy = function () { return delete r[this.axis][this.id], delete this.context.waypoints[this.axis][this.id], this.context.checkEmpty() }, t.getWaypointsByElement = function (t) { var e, n; return (n = t[v]) ? (e = i.extend({}, r.horizontal, r.vertical), i.map(n, function (t) { return e[t] })) : [] }, t }(), f = { init: function (t, e) { var n; return null == e && (e = {}), null == (n = e.handler) && (e.handler = t), this.each(function () { var t, n, a, r; return t = i(this), a = null != (r = e.context) ? r : i.fn[$].defaults.context, i.isWindow(a) || (a = t.closest(a)), a = i(a), n = c[a[0][d]], n || (n = new o(a)), new s(t, n, e) }), i[w]("refresh"), this }, disable: function () { return f._invoke.call(this, "disable") }, enable: function () { return f._invoke.call(this, "enable") }, destroy: function () { return f._invoke.call(this, "destroy") }, prev: function (t, e) { return f._traverse.call(this, t, e, function (t, e, i) { return e > 0 ? t.push(i[e - 1]) : void 0 }) }, next: function (t, e) { return f._traverse.call(this, t, e, function (t, e, i) { return e < i.length - 1 ? t.push(i[e + 1]) : void 0 }) }, _traverse: function (t, e, a) { var o, s; return null == t && (t = "vertical"), null == e && (e = n), s = u.aggregate(e), o = [], this.each(function () { var e; return e = i.inArray(this, s[t]), a(o, e, s[t]) }), this.pushStack(o) }, _invoke: function (t) { return this.each(function () { var e; return e = s.getWaypointsByElement(this), i.each(e, function (e, i) { return i[t](), !0 }) }), this } }, i.fn[$] = function () { var t, n; return n = arguments[0], t = 2 <= arguments.length ? e.call(arguments, 1) : [], f[n] ? f[n].apply(this, t) : i.isFunction(n) ? f.init.apply(this, arguments) : i.isPlainObject(n) ? f.init.apply(this, [null, n]) : i.error(n ? "The " + n + " method does not exist in jQuery Waypoints." : "jQuery Waypoints needs a callback function or handler option.") }, i.fn[$].defaults = { context: n, continuous: !0, enabled: !0, horizontal: !1, offset: 0, triggerOnce: !1 }, u = {
            refresh: function () { return i.each(c, function (t, e) { return e.refresh() }) }, viewportHeight: function () { var t; return null != (t = n.innerHeight) ? t : a.height() }, aggregate: function (t) {
                var e, n, a; return e = r, t && (e = null != (a = c[i(t)[0][d]]) ? a.waypoints : void 0), e ? (n = { horizontal: [], vertical: [] }, i.each(n, function (t, a) {
                    return i.each(e[t], function (t, e) {
                        return a.push(e)
                    }), a.sort(function (t, e) { return t.offset - e.offset }), n[t] = i.map(a, function (t) { return t.element }), n[t] = i.unique(n[t])
                }), n) : []
            }, above: function (t) { return null == t && (t = n), u._filter(t, "vertical", function (t, e) { return e.offset <= t.oldScroll.y }) }, below: function (t) { return null == t && (t = n), u._filter(t, "vertical", function (t, e) { return e.offset > t.oldScroll.y }) }, left: function (t) { return null == t && (t = n), u._filter(t, "horizontal", function (t, e) { return e.offset <= t.oldScroll.x }) }, right: function (t) { return null == t && (t = n), u._filter(t, "horizontal", function (t, e) { return e.offset > t.oldScroll.x }) }, enable: function () { return u._invoke("enable") }, disable: function () { return u._invoke("disable") }, destroy: function () { return u._invoke("destroy") }, extendFn: function (t, e) { return f[t] = e }, _invoke: function (t) { var e; return e = i.extend({}, r.vertical, r.horizontal), i.each(e, function (e, i) { return i[t](), !0 }) }, _filter: function (t, e, n) { var a, o; return (a = c[i(t)[0][d]]) ? (o = [], i.each(a.waypoints[e], function (t, e) { return n(a, e) ? o.push(e) : void 0 }), o.sort(function (t, e) { return t.offset - e.offset }), i.map(o, function (t) { return t.element })) : [] }
        }, i[w] = function () { var t, i; return i = arguments[0], t = 2 <= arguments.length ? e.call(arguments, 1) : [], u[i] ? u[i].apply(null, t) : u.aggregate.call(null, i) }, i[w].settings = { resizeThrottle: 100, scrollThrottle: 30 }, a.load(function () { return i[w]("refresh") })
    })
}.call(this), function () { !function (t, e) { return "function" == typeof define && define.amd ? define(["jquery", "waypoints"], e) : e(t.jQuery) }(this, function (t) { var e; return e = { container: "auto", items: ".infinite-item", more: ".infinite-more-link", offset: "bottom-in-view", loadingClass: "infinite-loading", onBeforePageLoad: t.noop, onAfterPageLoad: t.noop }, t.waypoints("extendFn", "infinite", function (i) { var n; return i = t.extend({}, t.fn.waypoint.defaults, e, i), 0 === t(i.more).length ? this : (n = "auto" === i.container ? this : t(i.container), i.handler = function (e) { var a; return "down" === e || "right" === e ? (a = t(this), i.onBeforePageLoad(), a.waypoint("disable"), n.addClass(i.loadingClass), t.get(t(i.more).attr("href"), function (e) { var o, s, r; return o = t(t.parseHTML(e)), s = t(i.more), r = o.find(i.more), n.append(o.find(i.items)), n.removeClass(i.loadingClass), r.length ? (s.replaceWith(r), a.waypoint("enable")) : a.waypoint("destroy"), i.onAfterPageLoad() })) : void 0 }, this.waypoint(i)) }) }) }.call(this), function () { !function (t, e) { return "function" == typeof define && define.amd ? define(["jquery", "waypoints"], e) : e(t.jQuery) }(this, function (t) { var e, i; return e = { wrapper: '<div class="sticky-wrapper" />', stuckClass: "stuck" }, i = function (t, e) { return t.wrap(e.wrapper), t.parent() }, t.waypoints("extendFn", "sticky", function (n) { var a, o, s; return o = t.extend({}, t.fn.waypoint.defaults, e, n), a = i(this, o), s = o.handler, o.handler = function (e) { var i, n; return i = t(this).children(":first"), n = "down" === e || "right" === e, i.toggleClass(o.stuckClass, n), a.height(n ? i.outerHeight() : ""), null != s ? s.call(this, e) : void 0 }, a.waypoint(o), this.data("stuckClass", o.stuckClass) }), t.waypoints("extendFn", "unsticky", function () { return this.parent().waypoint("destroy"), this.unwrap(), this.removeClass(this.data("stuckClass")) }) }) }.call(this); var cookie = { put: function (t, e, i) { var n = ""; if (i) { var a = new Date; a.setTime(a.getTime() + 24 * i * 60 * 60 * 1e3), n = "; expires=" + a.toGMTString() } document.cookie = t + "=" + e + n + "; path=/" }, get: function (t) { for (var t = t + "=", e = document.cookie.split(";"), i = 0; i < e.length; i++) { for (var n = e[i]; " " == n.charAt(0) ;) n = n.substring(1, n.length); if (0 == n.indexOf(t)) return n.substring(t.length, n.length) } return null }, "delete": function (t) { this.put(t, "", -1) } }, editionBar = function () { function t(t) { var i = t, a = cookie.get("origin"), o = cookie.get("edition"); "1" != cookie.get("hide_bar") && ($("body").on("click", "#edition-bar .close", function () { cookie.put("hide_bar", "1", 30), n() }), $("body").on("click", "#edition-bar .default", function (t) { t.preventDefault(), cookie.put("edition", i, 30), n() }), $("body").on("click", "#edition-bar .switch", function (t) { t.preventDefault(), cookie.put("edition", i, 30), n() }), o && a ? e(a, o, i) : $.ajax("/async/edition/?force", { success: function (t) { var n = t; e(n.origin, n.edition, i) } })) } function e(t, e, n) { (t != e || e != n) && ($("#edition-bar [data='edition.label']").html(a[n]), i()) } function i() { $("#edition-bar").slideDown() } function n() { $("#edition-bar").slideUp() } var a = { us: "the United States", me: "the Middle East" }; return { init: t, arbiter: e } }(), entFlowplayer = { _init: function (t) { this.params = t, this._fetchAmazonAd() }, _render: function () { var t = 1; flowplayer.conf = { advance: !1, fullscreen: !0, volumeLevel: t, embed: !1, ratio: this.params.aspect, splash: !0, analytics: "UA-61172503-1", key: "$782605038311567", logo: "https://assets.entrepreneur.com/static/e-logo-nav.png", cuepoints: [.5] }; var e = { ads: [{ time: 0, adTagUrl: { flash: this.params.prerollTag, html5_inline: this.params.prerollTag, html5_native: this.params.prerollTag } }] }; if (0 == this.params.showAds ? ($("#" + this.params.playerId).flowplayer(), $("#" + this.params.playerId).show()) : ($("#" + this.params.playerId).flowplayer({ advertising: e }), $("#" + this.params.playerId).show()), this.params.autoPlay && "undefined" == typeof window.orientation) { var i = $("#" + this.params.playerId), n = flowplayer(i); n.load() } bindVideoPlayerFunctions(this.params) }, _easyOnMobile: function () { $('div[id^="vidplayer"]').each(function () { var t = "vidplayer__" + Math.random().toString(36).slice(2), e = $(this).data("videoid"), i = $(this).data("hero"), n = "url('https://assets.entrepreneur.com/content/16x9/822/" + i + "')", a = "video/mp4", o = "https://assets.entrepreneur.com/video/cdn/" + e + ".mp4"; $(this).replaceWith($("<div class='pl-video-slot'><video><source></source></video></div>").attr("id", t).data("videoid", e).data("hero", i).css({ display: "block", "background-image": n }).find("source").attr("type", a).attr("src", o).end()), flowplayerParams.playerId = t, flowplayerParams.showAds = !1, entFlowplayer._init(flowplayerParams) }) }, _fetchAmazonAd: function () { if (0 == this.params.showAds) return void this._render(); window.top.location.hash && (paramsObject = JSON.parse(this.params.prerollParams), paramsObject.cust_params += "%2Cmsp", uri = Object.keys(paramsObject).map(function (t) { return t + "=" + paramsObject[t] }).join("&"), this.params.prerollTag = "http://pubads.g.doubleclick.net/gampad/ads?" + uri); var t = Math.floor(Date.now() / 1e3), e = [], i = 0, n = this, a = setInterval(function () { if (targeting = amznads.getTargeting()) { for (var o in targeting) { var s = targeting[o]; s instanceof Array && (s = s.join(",")), e.push(o + "%3D" + encodeURIComponent(s)) } e.length > 0 && (console.log("amazon success"), clearInterval(a), n.params.prerollTag += "%26" + e.join("%26") + "&correlator=" + t, n._render()) } i > 1500 && (console.log("amazon timeout"), clearInterval(a), n.params.prerollTag += "&correlator=" + t, n._render()), i += 50 }, 50) }, params: {} }, rubberDuck = function () { var t = document.createElement("script"); t.type = "text/javascript", t.src = "http://tm.iqfp1.com/query.js?ctx=2752615&cmp=2756531&icall=rubberDuck.response&cb=" + Math.floor(999999 * Math.random()); var e = document.body; e.insertBefore(t, e.firstChild); var i = setTimeout(function () { rubberDuck.response(null) }, 1e3); return { timeHandle: i, response: function (t) { clearTimeout(rubberDuck.timeHandle), null === t ? ad.caninit = !1 : 1 == t.responseTypeId && t.ifb === !1 ? ad.caninit = !0 : 1 == t.responseTypeId && t.ifb ? ad.caninit = !1 : 2 == t.responseTypeId && (ad.caninit = !1) } } }(); try { amznads.getAds("3133") } catch (e) { } String.prototype.startsWith || (String.prototype.startsWith = function (t) { return 0 === this.lastIndexOf(t, 0) }), String.prototype.contains || (String.prototype.contains = function (t) { return -1 !== this.indexOf(t) }); var googletag = googletag || {}; googletag.cmd = googletag.cmd || [], function () { var t = document.createElement("script"); t.async = !0, t.type = "text/javascript"; var e = "https:" == document.location.protocol; t.src = (e ? "https:" : "http:") + "//www.googletagservices.com/tag/js/gpt.js"; var i = document.getElementsByTagName("script")[0]; i.parentNode.insertBefore(t, i) }(); var s = new TagContainerLoader; s.tagContainerDC = "d2", s.tagContainerNamespace = "entrepreneur", s.tagContainerName = "Entrepreneurcom", s.loadTagContainer(); var rnum = Math.floor(1e9 * Math.random()), ad = { caninit: null, meta: { platform: "web", server: "app01", msp: null, ozmsp: null, pp: null, c1: null, contentID: null }, unitName: "/6280/Entrepreneur", pageCount: 1, compete: [], slots: [], visThreshold: 50, override: [], device: null, sizes: { xl: [[1200, 300]], h: [[970, 90], [970, 250], [728, 90]], v: [[300, 600], [300, 1050], [160, 600], [300, 250]], i: [[600, 600], [640, 480]], m: [[320, 50]] }, viableSizes: { l: { h: [[970, 90], [970, 250], [728, 90]], v: [[300, 600], [300, 1050], [160, 600], [300, 250]], i: [[600, 600], [640, 480]] }, m: { h: [[728, 90]], v: [[300, 600], [300, 1050], [160, 600], [300, 250]], i: [[600, 600], [640, 480]] }, s: { h: [[320, 50], [300, 50], [300, 250]], v: [[300, 250]], i: [[300, 250]] } }, setWidth: function () { var t = Math.max(document.documentElement.clientWidth, window.innerWidth || 0); t >= 970 ? (ad.device = "desktop", ad.sizes.h = ad.viableSizes.l.h, ad.sizes.v = ad.viableSizes.l.v, ad.sizes.i = ad.viableSizes.l.i) : t > 728 && 970 > t ? (ad.device = "tablet", ad.sizes.h = ad.viableSizes.m.h, ad.sizes.v = ad.viableSizes.m.v, ad.sizes.i = ad.viableSizes.m.i) : (ad.device = "mobile", ad.sizes.h = ad.viableSizes.s.h, ad.sizes.v = ad.viableSizes.s.v, ad.sizes.i = ad.viableSizes.s.i) }, renderXlAd: function () { }, available: [], init: function () { var t, e, i = ["homepage"], n = []; if (ad.setWidth(), ad.renderXlAd(), $("meta[name=keywords]").length > 0) { for (i = $("meta[name=keywords]").attr("content").split(","), t = 0; t < i.length; t++) i[t] = i[t].toLowerCase().replace(/\W+/g, ""); $('meta[property="og:id"]').length > 0 && i.push($('meta[property="og:id"]').attr("content")) } if ($("meta[name=unitName]").length > 0 && (ad.unitName = $("meta[name=unitName]").attr("content")), i = $("meta[name=campaignKeyword]").length > 0 ? [$("meta[name=campaignKeyword]").attr("content")] : i, null !== window.top.location.hash) for (e = window.top.location.hash.substr(1).split(";"), t = 0; t < e.length; t++) e[t].startsWith("mp") ? (ad.meta.msp = "MSP-" + getHVal(e[t]), i.push("msp")) : e[t].startsWith("pp") ? ad.meta.pp = ad.meta.c1 = getHVal(e[t]) : e[t].startsWith("src") ? (s.eVar65 = getHVal(e[t]), ad.meta.pp && (ad.meta.c1 += "-" + s.eVar65)) : e[t].startsWith("cam") ? (s.campaign = getHVal(e[t]), ad.meta.pp && (ad.meta.c1 += s.campaign)) : e[t].startsWith("ctp") ? s.eVar60 = getHVal(e[t]) : e[t].startsWith("cnm") ? s.eVar61 = getHVal(e[t]) : e[t].startsWith("cdt") ? s.eVar62 = getHVal(e[t]) : e[t].startsWith("cdn") ? s.eVar63 = getHVal(e[t]) : e[t].startsWith("msc") ? s.eVar64 = getHVal(e[t]) : e[t].startsWith("aff") ? s.eVar66 = getHVal(e[t]) : "r:1" === e[t] ? refreshAdsInterval() : "iad" === e[t] ? ad.iad.dnf = !0 : e[t].startsWith("test") && (ad.unitName = "/6280/Entrepreneur/testing", i = [getHVal(e[t])]); ad.meta.ozmsp = null === ad.meta.msp ? "org" : ad.meta.msp, $(".adbox:not([id])").each(function (t, e) { var a, o = $(e), s = randID(); o.attr("id", s), a = { e: o, id: s, kw: i, l: !1 }, o.visible(ad.visThreshold) ? n.push(a) : ad.available.push(a) }), $("#skin").length > 0 && n.push({ e: $("#skin"), id: $("#skin").attr("id"), kw: i }), googletag.cmd.push(function () { var t; googletag.pubads().setTargeting("kw", i), googletag.pubads().setTargeting("ed", cookie.get("edition") || "us"), googletag.disablePublisherConsole(), googletag.pubads().collapseEmptyDivs(!0), googletag.pubads().enableAsyncRendering(), googletag.pubads().enableSingleRequest(); try { amznads.setTargetingForGPTAsync("amznslots") } catch (e) { } for (googletag.pubads().addEventListener("slotRenderEnded", function (t) { 1200 == t.size[0] && $(".holder:last .f-w").addClass("xlad-" + t.size[1]) }), googletag.enableServices(), t = 0; t < n.length; t++) ad.slots.push(ad.defineSlot(n[t])), googletag.display(n[t].id) }), this.omniture() }, checkScrollPos: function () { var t, e = []; for (t in ad.available) !ad.available[t].l && ad.available[t].e.visible(ad.visThreshold) && (e.push(ad.available[t]), delete ad.available[t]), ad.renderXlAd(); e.length && ad.render(e) }, render: function (t) { var e = []; googletag.cmd.push(function () { var i, n; for (i in t) googletag.pubads().setTargeting("kw", t[i].kw), n = ad.defineSlot(t[i]), ad.slots.push(n), e.push(n), googletag.display(t[i].id) }), googletag.cmd.push(function () { googletag.pubads().refresh(e) }), delete e }, newPage: function (t) { var e, i = ["homepage"]; if (ad.pageCount++, ad.pageCount % 3 == 0 && (ad.compete = []), "undefined" !== t.keywords) { i = t.keywords.split(","); for (e in i) i[e] = i[e].toLowerCase().replace(/\W+/g, ""); "undefined" !== t.id && i.push(t.id) } googletag.pubads().setTargeting("kw", t.campaignKeyword || i), ad.discover(i) }, discover: function (t) { t = t || []; var e = [], n = []; $(".adbox:not([id])").each(function (i, n) { var a, o = $(n), s = randID(); o.attr("id", s), a = { e: o, id: s, kw: t }, 2 > i ? e.push(a) : ad.available.push(a) }), googletag.cmd.push(function () { for (i in e) ad.slots.push(ad.defineSlot(e[i])), n.push(ad.slots[ad.slots.length - 1]), googletag.display(e[i].id); googletag.pubads().refresh(n) }) }, refreshAll: function () { googletag.pubads().refresh(ad.slots) }, defineSlot: function (t) { var e, i, n = t.e.data("key"), a = t.id, o = t.e.data("size"); if (o && (o = [o.split(",").map(Number)]), n.contains("had")) i = "mobile" === ad.device && "mobile" === t.e.data("size") ? googletag.defineSlot(ad.unitName, [300, 250], a) : googletag.defineSlot(ad.unitName, n.contains("small") ? [ad.sizes.h[0]] : o || ad.sizes.h, a), n.contains("top") && i.setTargeting("pos", "top"); else if (n.contains("xlad")) i = googletag.defineSlot(ad.unitName, ad.sizes.xl, a), n.contains("header") && i.setTargeting("pos", "header"); else if (n.contains("vad")) i = googletag.defineSlot(ad.unitName, o || ad.sizes.v, a); else if (n.contains("sad")) i = googletag.defineOutOfPageSlot(ad.unitName, a); else if (n.contains("iad")) i = googletag.defineSlot(ad.unitName, ad.sizes.i, a); else { if (!n.contains("mad")) return !1; i = googletag.defineSlot(ad.unitName, ad.sizes.m, a) } for (e in ad.compete) i.setCategoryExclusion(ad.compete[e]); return i.addService(googletag.pubads()) }, omniture: function (t) { var e = {}, i = ["homepage"]; if (t) e = t, s.events = "event19", s.pageURL = e.canonical, s.referrer = s.eVar74; else { var n = $("meta[name=omnidata]"); $("meta[name=keywords]").length > 0 ? i = $("meta[name=keywords]").attr("content").toLowerCase().replace(/\W+,/g, "").split(",") : n.length > 0 && (i = n.attr("cat").split(":")), e = { id: $('meta[property="og:id"]').length ? $('meta[property="og:id"]').attr("content") : 0, keywords: i, type: n.attr("type"), title: $("title").html().replace(/[^a-z0-9]+/gi, " "), author: n.attr("author"), authorType: n.attr("authorType"), pubDate: n.attr("pubDate") } } var a = e.keywords; s.pageName = a.join(" : ") + " - " + e.title, s.server = window.top.location.hostname, s.eVar3 = ad.meta.server, s.eVar4 = ad.meta.platform, s.eVar5 = ad.meta.msp, s.eVar6 = e.type, s.eVar7 = e.id, s.eVar8 = e.author, s.eVar9 = e.title, s.eVar12 = e.pubDate, s.eVar29 = e.authorType, s.eVar74 = window.top.location.href.split("#")[0], s.hier1 = a.join(":").replace(/\s/g, "") + " - " + e.title, s.list3 = a.join(":").replace(/\s/g, ""), s.t() }, iad: { ac: 15, th: null, dnf: !1, show: function () { $(".modal-content, .modal-background").addClass("active"); var t = $("#interstitial .notification span"); ad.iad.th = setInterval(function () { t.html(ad.iad.ac--), ad.iad.ac < 0 && ad.iad.hide() }, 1e3) }, hide: function () { $(".modal-content, .modal-background").removeClass("active"), $(".modal-content, .modal-background, #interstitial").hide(), clearInterval(ad.iad.th) } } }, adI = 0; wait(), $(".modal-background, .modal-close").click(function (t) { t.preventDefault(), ad.iad.hide() }), window.addEventListener("resize", function () { ad.setWidth() }), $w.scroll(throttle(ad.checkScrollPos, 100)), function (t) { function e(e, i, n) { n = n || "no"; var r = a[e]; $pane = t(".homestream." + e); var l = t(".load-more").data("edition") || "us"; t.ajax({ url: "/async/homestream/" + e + "/" + r + "/" + n + "/" + l, dataType: "json", error: function () { }, success: function (n) { var l = n.content, d = ""; o[e] || (o[e] = parseInt(n.totalPages)), r == o[e] && t(".load-more[data-pane=" + e + "]").remove(); for (var c = 0; c < l.length; c++) d += Mustache.render(s, l[c]); $pane.children(".list").append(d), a[e]++, i && i() } }) } function i(o) { return 0 === a[o] ? e(o, function () { i(o) }) : (n.hide(), n = t(".homestream." + o), void n.fadeIn("fast")) } if ("/" === window.location.pathname) { var n = t(".homestream.latest"), a = { latest: 1, trending: 1, top: 1 }, o = { latest: null, trending: null, top: null }, s = t("#listTemplate").html(); Mustache.parse(s), t(".kicker-group .toggle").click(function () { var e = t(this); t(".kicker-group .toggle").removeClass("active"), e.addClass("active"), i(e.data("pane")) }), t(".load-more").click(function () { t(this).hasClass("pressed") ? e(t(this).data("pane"), null) : (e(t(this).data("pane"), null, "yes"), t(".load-more").addClass("pressed")) }) } }($), function (t) { function e() { t.ajax({ url: "/async/latest/" + i, dataType: "json", error: function () { }, success: function (e) { var o = e.content, s = ""; i == e.totalPages && t(".load-more").remove(); for (var r = 0; r < o.length; r++) s += Mustache.render(a, o[r]); n.append(s), setTime(), i++ } }) } if ("/latest" === window.location.pathname) { var i = 1, n = t("#latest"), a = t("#listTemplate").html(); Mustache.parse(a), t(".load-more").click(function () { e() }) } }($), null !== window.location.pathname.match(/^\/(article|slideshow|video|blog|answer|businessideas|encyclopedia)/) && !function () { var t = Array(), e = ($("#nav-header"), { psl: [], list: [], future: [], acursor: 0, curpage: 1, offset: { is: "80%", cs: "30%" }, init: function () { $("input[name=meta]").length > 0 && (e.list.push($.parseJSON($("input[name=meta]").val())), this.postLoad()), $(".context-switch").waypoint({ offset: e.offset.cs, handler: e.switchContext }), $("#infinite-scroll").waypoint({ offset: e.offset.is, handler: function (t) { "down" === t && e.getNext() } }), fasbids = ["#entShareBarTop" + $('meta[property="og:id"]').attr("content"), "#entShareBarBottom" + $('meta[property="og:id"]').attr("content"), "#entShareBarPG" + $('meta[property="og:id"]').attr("content")], entShareBarParams = { canonical: $('meta[property="og:url"]').attr("content"), desc: $('meta[property="og:description"]').attr("content"), hero: $('meta[property="og:image"]').attr("content"), objectId: $('meta[property="og:id"]').attr("content"), title: $('meta[property="og:title"]').attr("content"), type: $('meta[property="og:type"]').attr("content"), shortLink: $('link[rel="shortlink"]').attr("href"), twhandle: $(".sharebar-tw").data("handle"), shareBarIds: fasbids, wayPoints: !0 }, t.push(new entShareBar(entShareBarParams)), this.binders() }, insertedContent: function (t) { var e = { 1: '<div class="YAD-3989d31c-0abd-3243-8503-6918e26aed84 rt-elem section-large"></div>' }; return "undefined" == typeof e[t] ? null : e[t] }, insertAd: function () { var t = '<div class="f-w adbox" data-key="xlad"></div>', e = '<div class="island-ad adbox rt-ad-elem" data-key="vad"></div>', i = '<div class="island-ad adbox" data-key="vad"></div>'; $(window).width() > 728 ? e = e : (e = i, $(".holder:last .bodycopy p:nth-of-type(5n + 5):not(p:last-of-type)").after(e)), "wellsfargo-businessplanning" == $("meta[name=campaignKeyword]").attr("content") && $(".holder:last p").length > 5 && $(".holder:last .bodycopy p:nth-of-type(5)").after(t) }, getNext: function (n) { var a = e.future.shift().replace("article", "iarticle"); if ("undefined" == typeof a) return $("#infinite-scroll").waypoint("disable"), e.getNext = function () { }, !1; $.waypoints("disable"); var o = $('<div style="display:none">'); $("#infinite-loading").show(), $.ajax({ url: a, cache: !1, async: !0, error: function () { }, success: function (a) { var s = $.parseJSON($(a).find('input[name="meta"]:first').val()); e.list.push(s), o.html(a), $(".holder:last").after(o), $(".context-switch:last").waypoint({ offset: e.offset.cs, handler: e.switchContext }), e.postLoad(), e.insertAd(), ad.newPage(s), dataLayer.push({ event: "objectInfiniteScroll" }); var r = s.keywords.split(","); for (i in r) r[i] = r[i].toLowerCase().replace(/\W+/g, ""); if (s.keywords = r, ad.omniture(s), o.show(), $("#infinite-loading").hide(), entShareBarParams = { title: s.title, canonical: s.url, desc: s.description, hero: "http://www.entreprneur.com" + s.image, type: s.type, objectId: s.id, shortLink: s.shortlink, twhandle: s.authorTwitter, shareBarIds: ["#entShareBarTop" + s.id, "#entShareBarBottom" + s.id], wayPoints: !0 }, t.push(new entShareBar(entShareBarParams)), $("img.lazy").lazyload({ effect: "fadeIn", threshold: 300 }), n && n(), ent.nlCookie(0, !0), $photogal = $("body").find(".ss-not-init"), $photogal) { new Slideshow($photogal) } } }) }, put: function (t) { this.list.push(t) }, switchContext: function (t) { "down" === t ? e.acursor++ : e.acursor--; var i = e.acursor; if ("undefined" != typeof e.list[i]) { data = e.list[i], document.title = decodeURIComponent(data.title), url = data.url.replace("http://www.entrepreneur.com", ""); var n = url.startsWith("http://"); 0 == n && ("undefined" === e.psl[i] ? "function" == typeof history.pushState && history.pushState(null, null, url) : "function" == typeof history.replaceState && history.replaceState(null, null, url)), e.psl[i] = 1 } "down" === t && "undefined" != typeof window.orientation && entFlowplayer._easyOnMobile() }, getContext: function (t) { return e.list[t ? e.list.length - 1 : e.acursor] }, getLoadables: function () { $("#repeater .listitem").each(function (t, i) { e.future.push($(i).find("a").attr("href")) }) }, getComments: function (t) { "undefined" != typeof fyre && (fyre.conv.load({ network: "livefyre.com" }, [{ collectionMeta: { articleId: t, url: fyre.conv.load.makeCollectionUrl() }, siteId: "334706", articleId: t, el: $(".comment-block:last").attr("id") }]), LF.CommentCount({ replacer: function (t, e) { t.innerHTML = 0 === e ? "Comment" : e, $(".livefyre-commentcount.barcount").each(function () { "Comment" == $(this).text() && $(this).parent().html('<i class="fa fa-comments"></i> CLICK HERE TO ADD A COMMENT') }) } })), $(".load-comments").click(function () { $(this).hide().prev(".comment-holder").addClass("active").css("height", "auto") }) }, postLoad: function () { mq.viewportLogic(), c = e.list[e.list.length - 1], this.getComments(c.id), $("time[title]").each(function () { var t = moment.utc($(this).attr("title"), "YYYY-MM-DD HH:mm:ss"); $(this).html(t.local().format("MMMM DD, YYYY")) }), $(".content-main-body iframe").css("width", "100%") }, binders: function () { $d.on("click", ".toggle-caption", function (t) { t.preventDefault(), $(this).parent().find(".caption-text").slideToggle() }).on("click", ".toggle-close", function (t) { t.preventDefault(), $(this).parent().parent().slideUp() }).on("click", ".sharebar-comm", function (t) { t.preventDefault(), commentParent = $(this).parents(".holder"), commentParent.find(".load-comments").click(), $("html, body").animate({ scrollTop: commentParent.find(".comment-holder").offset().top - 100 }, 1e3) }).on("click", ".next .top", function () { return o.click(), !1 }).on("click", ".next .nextarticle", function () { return ent.nlCookie(0, !0), a.click(), !1 }) } }); e.insertAd(), e.getLoadables(); var n = { data: [], cursor: 1, offset: 0, pkey: null, th: null, init: function () { $.get("/async/storystream", function (t) { n.data = t; for (i in n.data) $(".ss-articles").append($("<a>").attr("style", "display:none;").attr("href", n.data[i].canonicalUrl).html('<span class="i-' + n.data[i].key + '"></span>' + n.data[i].headline)); $(".ss-articles a:first").show(), n.data.length > 1 && setInterval(n.tick, 1e3) }, "json") }, toggle: function () { n.th ? clearTimeout(n.tick) : n.th = setInterval(n.tick, 1e3) }, tick: function () { var t = 100 / n.data.length, e = parseInt(Date.now() / 1e3).toString().slice(-2), i = Math.floor(e / t); n.cursor != i && (n.cursor = i - n.offset, n.display()) }, manualTick: function () { var t = n.cursor; n.cursor = parseInt(Math.random() * n.data.length), t === n.cursor && n.cursor++, n.display() }, display: throttle(function () { n.pkey != n.data[n.cursor].key && ($("#story-stream .navarrow").fadeOut(300), n.pkey = n.data[n.cursor].key), $(".ss-articles a").fadeOut(300), $(".ss-articles a:nth-child(" + (n.cursor + 1) + ")").delay(300).fadeIn(300) }, 1e3) }, a = { show: function () { $(".next a").animate({ marginRight: "0px" }, 200) }, hide: function () { $(".next a").animate({ marginRight: "-170px" }, 200) }, click: function () { $("div.next").addClass("active"), e.getNext(function () { $("html, body").animate({ scrollTop: $(".main:last").offset().top - 150 }, 1e3, "swing", function () { $("div.next").removeClass("active") }) }) } }, o = { click: function () { $("html, body").animate({ scrollTop: 0 }, 1e3) } }, s = setInterval(function () { jQuery && "function" == typeof entShareBar && (e.init(), n.init(), clearInterval(s)) }, 750) }(), function (t) { function e(e, i) { var n = a[e], l = t("#pop" + e); t.ajax({ url: "/async/popular/" + e + "/" + n, dataType: "json", error: function () { }, success: function (d) { var c = d.content, h = ""; if (o[e] || (o[e] = parseInt(d.totalPages)), 0 == n) { var u = c.shift(); u.imageName = u.rawImageName; var f = Mustache.render(s, u); l.children(".top").html(f) } else n == o[e] && t(".load-more[data-pane=" + e + "]").remove(); switch (e) { case 1: paneType = "t"; break; case 7: paneType = "w"; break; case 30: paneType = "m" } for (var p = 0; p < c.length; p++) c[p].paneType = paneType, h += Mustache.render(r, c[p]); l.children(".list").append(h), a[e]++, i && i() } }) } function i(o) { return 0 == a[o] ? e(o, function () { i(o) }) : (n.hide(), n = t("#pop" + o), void n.fadeIn("fast")) } if ("/popular" === window.location.pathname) { var n = t("#pop1"), a = { 1: 1, 7: 0, 30: 0 }, o = { 1: null, 7: null, 30: null }, s = t("#topTemplate").html(), r = t("#listTemplate").html(); Mustache.parse(s), Mustache.parse(r), t(".kicker-group .toggle").click(function () { var e = t(this); t(".kicker-group .toggle").removeClass("active"), e.addClass("active"), i(e.data("pane")) }), t(".load-more").click(function () { e(t(this).data("pane")) }) } }($), function () { if ("undefined" != typeof paging && 0 != $(".paging").length) { for (var t = -1, e = [], i = paging.pages, n = paging.canonical, a = 0; a < i.length; a++) i[a] < 0 && (t = -1 * i[a] - 1); if (totalPages = i.length, totalPages > 1) { e = []; var a = 0; if (bottomMin = 8, minPages = 10, topOffset = 10 - (totalPages - t), bottomOffset = 10 - t, bottomMin -= 3, totalPages > minPages && t - (bottomMin > topOffset ? bottomMin : topOffset) > 2) { for (e.push(1), e.push(0), sub = [], h = a + 2; h < t - (bottomMin > topOffset ? bottomMin : topOffset) + 1; h++) sub.push(h); e.push(sub), a = t - (bottomMin > topOffset ? bottomMin : topOffset) } for (; a < totalPages; a++) { if (totalPages > minPages && t + (6 > bottomOffset ? 6 : bottomOffset) < totalPages && a == t + (4 > bottomOffset ? 4 : bottomOffset)) { for (sub = [], h = a + 1; h < totalPages; h++) sub.push(h); e.push(sub), e.push(0), e.push(totalPages); break } e.push(a == t ? -(a + 1) : a + 1) } } var o = 0, s = 0, r = ""; for (a = 0; a < e.length; a++) if (isNaN(e[a])) { for (dropdown = "<div class='pagingDropdown pagingArch' style='' id='dd" + s + "'>", h = 0; h < e[a].length; h++) dropdown += "<a href='" + n + e[a][h] + "'>Page " + e[a][h] + "</a><br/>"; dropdown += "</div>", r += dropdown, s++ } else 0 == e[a] ? (r += "<a href='javascript: void(1);' onmouseover='$(\"#dd" + o + '").css("display","inline-block");\'>...</a>', o++) : r += e[a] < 0 ? "<span>" + -1 * e[a] + "</span>" : "<a href='" + n + e[a] + "'>" + e[a] + "</a>"; $("#pager").html(r), $(".pagingDropdown").mouseleave(function () { $(this).hide() }) } }(), function (t) { function e() { var e, o = window.location.pathname; e = "/videos" == o ? 0 : o.replace("/videos/", ""), t.ajax({ url: "/async/videos", data: { page: i, path: e }, dataType: "json", error: function () { }, success: function (e) { var o = e.content, s = ""; i++, i == e.totalPages && t(".load-more").remove(); for (var r = 0; r < o.length; r++) s += Mustache.render(a, o[r]); n.append(s), setTime() } }) } if (!window.location.pathname.indexOf("/videos")) { setTime(); var i = 1, n = t("#latest"), a = t("#videoTemplate").html(); Mustache.parse(a), t(".load-more").click(function () { console.log("click"), e() }) } }($);